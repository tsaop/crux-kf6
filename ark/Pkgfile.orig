# Description: KDE document viewer
# URL: https://invent.kde.org/graphics/okular
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: brotli chmlib dbus discount djvulibre double-conversion ebook-tools exiv2 flac fontconfig freetype ghostscript glib gpgme harfbuzz inih karchive kauth kbookmarks kcodecs kcolorscheme kcompletion kconfig kconfigwidgets kcoreaddons kcrash kglobalaccel kguiaddons ki18n kiconthemes kio kirigami-addons kitemviews kjobwidgets knotifications kparts kpty kservice ktextwidgets kwallet kwidgetsaddons kwindowsystem kxmlgui libassuan libb2 libcanberra libglvnd libgpg-error libjpeg-turbo libkexiv2 libogg libpng libsndfile libspectre libtiff libvorbis libxkbcommon libxml2 libzip nspr nss opus phonon-qt6 plasma-activities poppler pulseaudio purpose qt6-5compat qt6-base qt6-declarative qt6-multimedia qt6-speech qt6-svg qt6-wayland solid sonnet threadweaver wayland xorg-libx11 xorg-libxau xorg-libxcb xorg-libxdmcp xorg-libxfixes xorg-xcb-util-keysyms

name=okular
version=24.02.0
source=(http://download.kde.org/stable/release-service/$version/src/$name-$version.tar.xz)
release=1

build() {
        cd $name-$version
        cmake -Bbuild \
                -DCMAKE_INSTALL_PREFIX=/usr \
                -DCMAKE_INSTALL_LIBDIR=lib \
		-DBUILD_TESTING=OFF

        cmake --build build
        DESTDIR=$PKG cmake --install build

	rm -rf $PKG/usr/share/{locale,doc}
        ( cd $PKG/usr/share/man
          find . ! -path . -type d | grep -v "man[0-9]" | xargs rm -rf
        )
}
