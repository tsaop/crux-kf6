# Description: Library and components for secure lock screen architecture
# URL: https://invent.kde.org/plasma/kscreenlocker
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: brotli dbus double-conversion elogind fontconfig freetype glib harfbuzz karchive kauth kcmutils kcodecs kcolorscheme kcompletion kconfig kconfigwidgets kcoreaddons kcrash kglobalaccel kguiaddons ki18n kiconthemes kidletime kio kitemviews kjobwidgets knotifications kpackage kservice ksvg kwidgetsaddons kwindowsystem kxmlgui layer-shell-qt libb2 libcanberra libglvnd libkscreen libogg libplasma libpng libvorbis libxkbcommon plasma-activities qt6-base qt6-declarative qt6-svg qt6-wayland solid wayland xorg-libice xorg-libsm xorg-libx11 xorg-libxau xorg-libxcb xorg-libxdmcp xorg-libxext xorg-libxfixes xorg-libxi xorg-xcb-util-keysyms

name=kscreenlocker
version=6.0.1
release=1
source=(https://download.kde.org/stable/plasma/$version/$name-$version.tar.xz
	kde.pam)

build() {
	cd $name-$version
	cmake -Bbuild \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DCMAKE_INSTALL_LIBEXECDIR=lib \
		-DBUILD_TESTING=OFF

	cmake --build build
	DESTDIR=$PKG cmake --install build

	# install PAM module
	install -dm755 $PKG/etc/pam.d
	install -m644 $SRC/kde.pam $PKG/etc/pam.d/kde

	rm -rf $PKG/usr/share/locale
}
